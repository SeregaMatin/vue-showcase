{"version":3,"sources":["webpack:///./src/views/Product.vue?8fe1","webpack:///./src/views/Product.vue?b8d9","webpack:///src/views/Product.vue","webpack:///./src/views/Product.vue?cec8","webpack:///./src/views/Product.vue?b35a"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","product","name","_l","productImage","key","class","productActiveImage","on","$event","attrs","getProductImagePath","getProductFormattedPrice","hasProductInCart","removeProductFromCart","addProductToCart","description","staticRenderFns","Promise","resolve","store","vm","Array","isArray","images","length","components","NotFound","SvgIcon","VButton","data","publicPath","computed","hasProduct","beforeRouteEnter","next","beforeRouteUpdate","initViewWithProduct","methods","$store","dispatch","catch","getters","component"],"mappings":"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","file":"js/chunk-cdd16a0a.a2da4e72.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.hasProduct)?_c('div',{staticClass:\"view view__product\"},[_c('h1',{staticClass:\"typography typography--headline1\"},[_vm._v(\"\\n    \"+_vm._s(_vm.product.name)+\"\\n  \")]),_c('div',{staticClass:\"product\"},[_c('div',{staticClass:\"product__images-list\"},_vm._l((_vm.product.images),function(productImage){return _c('div',{key:productImage,staticClass:\"product__images-list-item\",class:{ 'product__images-list-item--active': _vm.productActiveImage === productImage },on:{\"click\":function($event){_vm.productActiveImage = productImage}}},[_c('img',{staticClass:\"product__images-list-item-img\",attrs:{\"src\":_vm.getProductImagePath(_vm.product, productImage),\"alt\":((_vm.product.name) + \" - \" + productImage)}})])}),0),_c('div',{staticClass:\"product__active-image\"},[_c('transition',{attrs:{\"name\":\"fade\"}},[_c('img',{key:_vm.productActiveImage,staticClass:\"product__active-image-img\",attrs:{\"src\":_vm.getProductImagePath(_vm.product, _vm.productActiveImage),\"alt\":((_vm.product.name) + \" - \" + _vm.productActiveImage)}})])],1),_c('div',{staticClass:\"product__summary\"},[_c('div',{staticClass:\"product__purchasing\"},[_c('div',{staticClass:\"product__purchasing-price\"},[_vm._v(\"\\n          \"+_vm._s(_vm.getProductFormattedPrice(_vm.product))+\" ₽\\n        \")]),(_vm.hasProductInCart(_vm.product))?_c('v-button',{staticClass:\"product__purchasing-cart-button button--secondary\",on:{\"click\":function($event){return _vm.removeProductFromCart(_vm.product)}}},[_c('svg-icon',{staticClass:\"svg-icon--size_m button__icon button__icon--left-aligned\",attrs:{\"src\":\"icomoon.svg#icon-remove-from-cart\"}}),_vm._v(\"\\n          Убрать из корзины\\n        \")],1):_c('v-button',{staticClass:\"product__purchasing-cart-button button--secondary\",on:{\"click\":function($event){return _vm.addProductToCart(_vm.product)}}},[_c('svg-icon',{staticClass:\"svg-icon--size_m button__icon button__icon--left-aligned\",attrs:{\"src\":\"icomoon.svg#icon-add-to-cart\"}}),_vm._v(\"\\n          Добавить в корзину\\n        \")],1)],1),_c('div',{staticClass:\"product__description\"},[_c('div',{staticClass:\"product__description-header\"},[_vm._v(\"\\n          Описание\\n        \")]),_vm._v(\"\\n        \"+_vm._s(_vm.product.description)+\"\\n      \")])])])]):_c('div',{staticClass:\"view view__product\"},[_c('not-found',[_vm._v(\"\\n    К сожалению, страница запрашиваемого товара не найдена\\n  \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div v-if=\"hasProduct\" class=\"view view__product\">\n    <h1 class=\"typography typography--headline1\">\n      {{product.name}}\n    </h1>\n    <div class=\"product\">\n      <div class=\"product__images-list\">\n        <div\n          v-for=\"productImage in product.images\"\n          v-bind:key=\"productImage\"\n          v-on:click=\"productActiveImage = productImage\"\n          class=\"product__images-list-item\"\n          v-bind:class=\"{ 'product__images-list-item--active': productActiveImage === productImage }\"\n        >\n          <img\n            v-bind:src=\"getProductImagePath(product, productImage)\"\n            v-bind:alt=\"`${product.name} - ${productImage}`\"\n            class=\"product__images-list-item-img\"\n          >\n        </div>\n      </div>\n      <div class=\"product__active-image\">\n        <transition name=\"fade\">\n          <img\n            v-bind:key=\"productActiveImage\"\n            v-bind:src=\"getProductImagePath(product, productActiveImage)\"\n            v-bind:alt=\"`${product.name} - ${productActiveImage}`\"\n            class=\"product__active-image-img\"\n          >\n        </transition>\n      </div>\n      <div class=\"product__summary\">\n        <div class=\"product__purchasing\">\n          <div class=\"product__purchasing-price\">\n            {{getProductFormattedPrice(product)}} &#8381;\n          </div>\n          <v-button\n            v-if=\"hasProductInCart(product)\"\n            v-on:click=\"removeProductFromCart(product)\"\n            class=\"product__purchasing-cart-button button--secondary\"\n          >\n            <svg-icon src=\"icomoon.svg#icon-remove-from-cart\" class=\"svg-icon--size_m button__icon button__icon--left-aligned\" />\n            Убрать из корзины\n          </v-button>\n          <v-button\n            v-else\n            v-on:click=\"addProductToCart(product)\"\n            class=\"product__purchasing-cart-button button--secondary\"\n          >\n            <svg-icon src=\"icomoon.svg#icon-add-to-cart\" class=\"svg-icon--size_m button__icon button__icon--left-aligned\" />\n            Добавить в корзину\n          </v-button>\n        </div>\n        <div class=\"product__description\">\n          <div class=\"product__description-header\">\n            Описание\n          </div>\n          {{product.description}}\n        </div>\n      </div>\n    </div>\n  </div>\n  <div v-else class=\"view view__product\">\n    <not-found>\n      К сожалению, страница запрашиваемого товара не найдена\n    </not-found>\n  </div>\n</template>\n\n<script>\nimport { formatPrice, isEmptyObject } from '@/utils/utils';\nimport store from '@/store/store';\nimport NotFound from '@/components/NotFound.vue';\nimport SvgIcon from '@/components/SvgIcon.vue';\nimport VButton from '@/components/VButton.vue';\n\nconst getProduct = function getProduct({ id: productId, product }) {\n  if (product) {\n    return Promise.resolve(product);\n  }\n\n  store.commit('showLoader');\n\n  return store.dispatch('showcase/getProduct', productId).catch((error) => {\n    store.commit('showError', error);\n  }).finally(() => {\n    store.commit('hideLoader');\n  });\n};\n\nconst initViewWithProduct = function initViewWithProduct({ vm, product }) {\n  vm.product = product;\n\n  vm.productActiveImage = Array.isArray(product.images) && product.images.length > 0\n    ? product.images[0]\n    : null;\n};\n\nexport default {\n  name: 'product',\n  components: {\n    NotFound,\n    SvgIcon,\n    VButton\n  },\n  data() {\n    return {\n      publicPath: process.env.BASE_URL,\n      product: null,\n      productActiveImage: null\n    };\n  },\n  computed: {\n    hasProduct() {\n      if (!this.product) {\n        return false;\n      }\n\n      return !isEmptyObject(this.product);\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    getProduct(to.params).then((product) => {\n      // Initialize view properties related to product & continue transition.\n      next(vm => initViewWithProduct({ vm, product }));\n    }).catch((error) => {\n      // Abort transition.\n      next(false);\n    });\n  },\n  beforeRouteUpdate(to, from, next) {\n    getProduct(to.params).then((product) => {\n      // Initialize view properties related to product.\n      initViewWithProduct({ vm: this, product });\n\n      // Continue transition.\n      next();\n    }).catch((error) => {\n      // Abort transition.\n      next(false);\n    });\n  },\n  methods: {\n    addProductToCart(product) {\n      return this.$store.dispatch('cart/addProduct', product).catch((error) => {\n        this.$store.commit('showError', error);\n      });\n    },\n    removeProductFromCart(product) {\n      return this.$store.dispatch('cart/removeProduct', product).catch((error) => {\n        this.$store.commit('showError', error);\n      });\n    },\n    hasProductInCart(product) {\n      return this.$store.getters['cart/hasProduct'](product);\n    },\n    getProductImagePath(product, productImage) {\n      return this.$store.getters['showcase/productImagePath'](product, productImage);\n    },\n    getProductFormattedPrice(product) {\n      return formatPrice(product.price);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import '@/styles/variables';\n@import '@/styles/blocks/typography/variables';\n@import '@/styles/blocks/product/variables';\n\n@import '@/styles/blocks/product/product';\n\n@import '@/styles/transitions/fade';\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Product.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Product.vue?vue&type=template&id=e21e24b2&\"\nimport script from \"./Product.vue?vue&type=script&lang=js&\"\nexport * from \"./Product.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Product.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}